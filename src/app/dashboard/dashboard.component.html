<!-- start page title -->
<div class="row">
	<div class="col-12">
		<div class="page-title-box">
			<div class="page-title-right">
				<form class="form-inline">
					<div class="form-group">
						<div class="input-group">
							<input type="text" class="form-control form-control-light" id="dash-daterange">
							<div class="input-group-append">
								<span class="input-group-text bg-primary border-primary text-white">
									<i class="mdi mdi-calendar-range font-13"></i>
								</span>
							</div>
						</div>
					</div>
					<a href="javascript: void(0);" class="btn btn-primary ml-2">
						<i class="mdi mdi-autorenew"></i>
					</a>
					<a href="javascript: void(0);" class="btn btn-primary ml-1">
						<i class="mdi mdi-filter-variant"></i>
					</a>
				</form>
			</div>
			<h4 class="page-title">CitizenX Dashboard</h4>
		</div>
	</div>
</div>
<!-- end page title -->

<div class="row">
	<div class="col-xl-5">

		<div class="row">
			<div class="col-lg-6">
				<div class="card widget-flat">
					<div class="card-body">
						<div class="float-right">
							<i class="mdi mdi-account-multiple widget-icon"></i>
						</div>
						<h5 class="text-muted font-weight-normal mt-0" title="Number of Customers">Incidents</h5>
						<h3 class="mt-3 mb-3">{{ incidents.incident_count.toLocaleString() }}</h3>
						<p class="mb-0 text-muted">
							<span class="text-{{ incidents.incident_count_change >= 0 ? 'success' : 'danger' }} mr-2"><i class="mdi {{ incidents.incident_count_change >= 0 ? 'mdi-arrow-up-bold' : 'mdi-arrow-down-bold' }}"></i> {{ incidents.incident_count_change }}%</span>
							<span class="text-nowrap">Since last month</span>
						</p>
					</div> <!-- end card-body-->
				</div> <!-- end card-->
			</div> <!-- end col-->

			<div class="col-lg-6">
				<div class="card widget-flat">
					<div class="card-body">
						<div class="float-right">
							<i class="mdi mdi-cart-plus widget-icon"></i>
						</div>
						<h5 class="text-muted font-weight-normal mt-0" title="Number of Orders">Users</h5>
						<h3 class="mt-3 mb-3">{{ incidents.user_count.toLocaleString() }}</h3>
						<p class="mb-0 text-muted">
							<span class="text-{{ incidents.user_count_change >= 0 ? 'success' : 'danger' }} mr-2"><i class="mdi {{ incidents.user_count_change >= 0 ? 'mdi-arrow-up-bold' : 'mdi-arrow-down-bold' }}"></i> {{ incidents.user_count_change }}%</span>
							<span class="text-nowrap">Since last month</span>
						</p>
					</div> <!-- end card-body-->
				</div> <!-- end card-->
			</div> <!-- end col-->
		</div> <!-- end row -->

		<div class="row">
			<div class="col-lg-6">
				<div class="card widget-flat">
					<div class="card-body">
						<div class="float-right">
							<i class="mdi mdi-currency-usd widget-icon"></i>
						</div>
						<h5 class="text-muted font-weight-normal mt-0" title="Average Revenue">Crime</h5>
						<h3 class="mt-3 mb-3">6,254</h3>
						<p class="mb-0 text-muted">
							<span class="text-danger mr-2"><i class="mdi mdi-arrow-down-bold"></i> 7.00%</span>
							<span class="text-nowrap">Since last month</span>
						</p>
					</div> <!-- end card-body-->
				</div> <!-- end card-->
			</div> <!-- end col-->

			<div class="col-lg-6">
				<div class="card widget-flat">
					<div class="card-body">
						<div class="float-right">
							<i class="mdi mdi-pulse widget-icon"></i>
						</div>
						<h5 class="text-muted font-weight-normal mt-0" title="Growth">Growth</h5>
						<h3 class="mt-3 mb-3">+ 30.56%</h3>
						<p class="mb-0 text-muted">
							<span class="text-success mr-2"><i class="mdi mdi-arrow-up-bold"></i> 4.87%</span>
							<span class="text-nowrap">Since last month</span>
						</p>
					</div> <!-- end card-body-->
				</div> <!-- end card-->
			</div> <!-- end col-->
		</div> <!-- end row -->

	</div> <!-- end col -->

	<div class="col-xl-7">
		<div class="card">
			<div class="card-body">
				<div class="dropdown float-right d-none">
					<a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
						<i class="mdi mdi-dots-vertical"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-right">
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Export Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Profit</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Action</a>
					</div>
				</div>
				<h4 class="header-title mb-3">Incidents Reported in 2018 VS 2017</h4>

				<div style="height: 263px;" class="chartjs-chart">
					<canvas id="high-performing-product"></canvas>
				</div>
			</div> <!-- end card-body-->
		</div> <!-- end card-->

	</div> <!-- end col -->
</div>
<!-- end row -->

<div class="row">
	<div class="col-xl-8">
		<div class="card">
			<div class="card-body">
				<div class="dropdown float-right d-none">
					<a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
						<i class="mdi mdi-dots-vertical"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-right">
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Export Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Profit</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Action</a>
					</div>
				</div>
				<h4 class="header-title mb-3">Incident Trend</h4>

				<div class="pull-in chart-content-bg">
					<div class="row text-center">
						<div class="col-md-6">
							<p class="text-muted mb-0 mt-3">Current Week</p>
							<h2 class="font-weight-normal mb-3">
								<small class="mdi mdi-checkbox-blank-circle text-primary align-middle mr-1"></small>
								<span>{{ weekChart.current_total }}</span>
							</h2>
						</div>
						<div class="col-md-6">
							<p class="text-muted mb-0 mt-3">Previous Week</p>
							<h2 class="font-weight-normal mb-3">
								<small class="mdi mdi-checkbox-blank-circle text-success align-middle mr-1"></small>
								<span>{{ weekChart.previous_total }}</span>
							</h2>
						</div>
					</div>
				</div>

				<!--<div class="dash-item-overlay d-none d-md-block">
					<h5>Today's Earning: $2,562.30</h5>
					<p class="text-muted font-13 mb-3 mt-2">Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui.
						Etiam rhoncus...</p>
					<a href="javascript: void(0);" class="btn btn-outline-primary">View Statements
						<i class="mdi mdi-arrow-right ml-2"></i>
					</a>
				</div>-->

				<div class="mt-3 chartjs-chart" style="height: 364px;">
					<canvas id="revenue-chart"></canvas>
				</div>
			</div> <!-- end card-body-->
		</div> <!-- end card-->
	</div> <!-- end col-->

	<div class="col-xl-4">
		<div class="card">
			<div class="card-body">
				<div class="dropdown float-right d-none">
					<a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
						<i class="mdi mdi-dots-vertical"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-right">
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Export Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Profit</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Action</a>
					</div>
				</div>

				<h4 class="header-title">Incidents By Location</h4>

				<div class="mb-4 mt-4">
					<div id="country-map" style="height: 224px"></div>
				</div>

				<div *ngFor="let location of incidents.location | slice:0:4;">
					<h5 class="mb-1 mt-0 font-weight-normal">{{ location.state }}</h5>
					<div class="progress-w-percent">
						<span class="progress-value font-weight-bold">{{ location.total }}</span>
						<div class="progress progress-sm">
							<div class="progress-bar" role="progressbar" [ngStyle]="{width: ((location.total * 100) / incidents.incident_count) + '%'}" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
					</div>
				</div>
			</div> <!-- end card-body-->
		</div> <!-- end card-->
	</div> <!-- end col-->
</div>
<!-- end row -->

<div class="row">
	<div class="col-xl-9">
		<div class="card">
			<div class="card-body">
				<a href="" class="btn btn-sm btn-link float-right mb-3">Export
					<i class="mdi mdi-download ml-1"></i>
				</a>
				<h4 class="header-title mt-2">Latest Incidents</h4>

				<div class="table-responsive">
					<table class="table table-centered table-hover mb-0">
						<tbody>
							<tr *ngFor="let incident of incidents.latest" (click)="getIncident(incident.incident_id)">
								<td>
									<h5 class="font-14 mb-1 font-weight-normal">{{ incident.subcategory }}</h5>
									<span class="text-muted font-13">{{ incident.createdOn * 1000 | date:'dd MMMM yyyy' }}</span>
								</td>
								<td>
									<h5 class="font-14 mb-1 font-weight-normal">{{ incident.category }}</h5>
									<span class="text-muted font-13">Incident Type</span>
								</td>
								<td>
									<h5 class="font-14 mb-1 font-weight-normal">{{ incident.city }}</h5>
									<span class="text-muted font-13">City</span>
								</td>
								<td>
									<h5 class="font-14 mb-1 font-weight-normal">{{ incident.createdBy || '-' }}</h5>
									<span class="text-muted font-13">Created By</span>
								</td>
								<td>
									<h5 class="font-14 mb-1 font-weight-normal">{{ incident.state }}</h5>
									<span class="text-muted font-13">State</span>
								</td>
							</tr>
						</tbody>
					</table>
				</div> <!-- end table-responsive-->
			</div> <!-- end card-body-->
		</div> <!-- end card-->
	</div> <!-- end col-->

	<div class="col-xl-3">
		<div class="card">
			<div class="card-body">
				<div class="dropdown float-right">
					<a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
						<i class="mdi mdi-dots-vertical"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-right d-none">
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Export Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Profit</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Action</a>
					</div>
				</div>
				<h4 class="header-title">Top Incidents</h4>

				<div class="mb-5 mt-4 chartjs-chart" style="height: 201px; max-width: 180px;">
					<canvas id="average-sales"></canvas>
				</div>

				<div class="chart-widget-list">
					<p *ngFor="let subcategory of incidents.subcategories | slice:0:4;">
						<i class="mdi mdi-square text-primary"></i> {{ subcategory.subcategory }}
						<span class="float-right">{{ subcategory.total }}</span>
					</p>
				</div>
			</div> <!-- end card-body-->
		</div> <!-- end card-->
	</div> <!-- end col-->

</div>
<!-- end row -->
<div class="modal" tabindex="-1" role="dialog" id="incident-modal">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">{{ incidentInfo.incident.category }}</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p><b>Category:</b> {{ incidentInfo.incident.category }}</p>
				<p><b>Sub Category:</b> {{ incidentInfo.incident.subcategory }}</p>
				<p><b>Description:</b> {{ incidentInfo.incident.description }}</p>
				<p><b>City:</b> {{ incidentInfo.incident.city }}</p>
				<p><b>State:</b> {{ incidentInfo.incident.state }}</p>
				<p><b>Country:</b> {{ incidentInfo.incident.country }}</p>
				<p><b>Rating:</b> {{ incidentInfo.incident.rating }}</p>
				<p><b>Created On:</b> {{ incidentInfo.incident.createdOn * 1000 | date:'dd MMMM yyyy' }}</p>
			</div>
		</div>
	</div>
</div>
